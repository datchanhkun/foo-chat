{"ast":null,"code":"var _jsxFileName = \"/Users/macbook/Desktop/App Foo Chat/simply-chat/client/src/pages/profile-pages/profile-pages.component.jsx\";\nimport React from 'react';\nimport { Redirect } from 'react-router-dom';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faHome, faPhone, faIndustry, faInfo, faTimes } from '@fortawesome/free-solid-svg-icons';\nimport ContentEditable from 'react-contenteditable';\nimport { editUser } from '../../redux/action/user.action';\nimport { connect } from 'react-redux';\nimport { LazyLoadImage } from \"react-lazy-load-image-component\";\nimport \"react-lazy-load-image-component/src/effects/blur.css\";\n\nclass ProfilePage extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.closeHandler = () => {\n      document.querySelector(\".alert\").style.display = 'none';\n    };\n\n    this.onSubmitHandler = () => {\n      let userData = {};\n\n      for (let x in this.state.user) {\n        if (x !== 'joined' && x !== '_id') {\n          userData[x] = this.state[x];\n        }\n      }\n\n      this.props.editUser(userData).then(response => this.setState({\n        success: response.success\n      }));\n    };\n\n    this.onChangeBioHandler = e => {\n      this.setState(prevState => ({ ...prevState,\n        user: { ...prevState.user,\n          bio: e.target.value\n        }\n      }));\n    };\n\n    this.onChangeTelephoneHandler = e => {\n      this.setState(prevState => ({ ...prevState,\n        user: { ...prevState.user,\n          telephone: e.target.value\n        }\n      }));\n    };\n\n    this.onChangeLocationHandler = e => {\n      this.setState(prevState => ({ ...prevState,\n        user: { ...prevState.user,\n          location: e.target.value\n        }\n      }));\n    };\n\n    this.onChangeOccupationHandler = e => {\n      this.setState(prevState => ({ ...prevState,\n        user: { ...prevState.user,\n          occupation: e.target.value\n        }\n      }));\n    };\n\n    this.state = {\n      currentUser: props.currentUser,\n      user: {\n        _id: '',\n        username: '',\n        userImage: '',\n        telephone: 'Thêm số điện thoại',\n        bio: 'Thêm thông tin tại đây',\n        occupation: 'Add Occupation',\n        location: 'Add location',\n        joined: ''\n      },\n      success: null\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.history.location.state) {\n      const currentUser = this.props.currentUser;\n      let userData = this.props.history.location.state.userData;\n      this.setState(prevState => ({ ...prevState,\n        user: { ...prevState.user,\n          _id: userData._id,\n          username: userData.username,\n          bio: userData.bio || userData.username === currentUser.username ? 'Add bio here' : \"\",\n          location: userData.location || userData.username === currentUser.username ? 'Add location' : \"\",\n          telephone: userData.telephone || userData.username === currentUser.username ? 'Add phone' : \"\",\n          userImage: userData.userImage,\n          occupation: userData.location || userData.username === currentUser.username ? 'Add Occupation' : \"\",\n          joined: userData.createdAt.split('T')[0]\n        }\n      }));\n    } else {\n      this.props.history.push('/');\n    }\n  }\n\n  render() {\n    const {\n      _id,\n      userImage,\n      username,\n      location,\n      joined,\n      bio,\n      telephone,\n      occupation\n    } = this.state.user;\n    const {\n      currentUser\n    } = this.props;\n    return this.props.history.location.state.userData ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"user-profile\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"user-profile__row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"user-profile__third\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"user-profile__card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"user-profile__display\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(LazyLoadImage, {\n      alt: userImage,\n      effect: \"blur\",\n      wrapperClassName: \"user-profile__display__image\",\n      src: userImage,\n      className: \"user-profile__display__image\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"user-profile__display__user\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"hidden\",\n      name: \"id\",\n      value: _id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 17\n      }\n    }, username))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"user-profile__information\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 15\n      }\n    }, \"Joined: \", joined, \" \"), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faHome,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(ContentEditable, {\n      html: location,\n      disabled: !(currentUser.username === username),\n      onChange: this.onChangeLocationHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faPhone,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(ContentEditable, {\n      html: telephone,\n      disabled: !(currentUser.username === username),\n      onChange: this.onChangeTelephoneHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faIndustry,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(ContentEditable, {\n      html: occupation,\n      disabled: !(currentUser.username === username),\n      onChange: this.onChangeOccupationHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 17\n      }\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"user-profile__two-third\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }\n    }, this.state.success && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"alert\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"alert__message\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 15\n      }\n    }, \" \", this.state.success), /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      className: \"alert__close-button\",\n      onClick: this.closeHandler,\n      icon: faTimes,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"user-profile__bio\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 13\n      }\n    }, \" \", /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faInfo,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 15\n      }\n    }), \" Bio\"), /*#__PURE__*/React.createElement(ContentEditable, {\n      className: \"user-profile__bio__content\",\n      html: bio,\n      disabled: !(currentUser.username === username),\n      onChange: this.onChangeBioHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 13\n      }\n    }), currentUser._id === _id && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-button\",\n      onClick: this.onSubmitHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 15\n      }\n    }, \"Submit\"))))) : /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 5\n      }\n    });\n  }\n\n}\n\nconst mapDispatchToProps = dispatch => ({\n  editUser: userData => dispatch(editUser(userData))\n});\n\nexport default connect(null, mapDispatchToProps)(ProfilePage);","map":{"version":3,"sources":["/Users/macbook/Desktop/App Foo Chat/simply-chat/client/src/pages/profile-pages/profile-pages.component.jsx"],"names":["React","Redirect","FontAwesomeIcon","faHome","faPhone","faIndustry","faInfo","faTimes","ContentEditable","editUser","connect","LazyLoadImage","ProfilePage","PureComponent","constructor","props","closeHandler","document","querySelector","style","display","onSubmitHandler","userData","x","state","user","then","response","setState","success","onChangeBioHandler","e","prevState","bio","target","value","onChangeTelephoneHandler","telephone","onChangeLocationHandler","location","onChangeOccupationHandler","occupation","currentUser","_id","username","userImage","joined","componentDidMount","history","createdAt","split","push","render","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport {Redirect} from 'react-router-dom';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faHome, faPhone, faIndustry, faInfo, faTimes } from '@fortawesome/free-solid-svg-icons'\r\nimport ContentEditable from 'react-contenteditable';\r\nimport { editUser } from '../../redux/action/user.action';\r\nimport {connect} from 'react-redux';\r\nimport { LazyLoadImage } from \"react-lazy-load-image-component\";\r\nimport \"react-lazy-load-image-component/src/effects/blur.css\";\r\n\r\nclass ProfilePage extends React.PureComponent {\r\n\r\n  closeHandler = () => {\r\n    document.querySelector(\".alert\").style.display = 'none';\r\n  }\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      currentUser: props.currentUser,\r\n      user:{\r\n        _id:'',\r\n        username: '',\r\n        userImage:'',\r\n        telephone: 'Thêm số điện thoại',\r\n        bio: 'Thêm thông tin tại đây',\r\n        occupation: 'Add Occupation',\r\n        location: 'Add location',\r\n        joined:''\r\n      },\r\n      success:null\r\n    }\r\n  }\r\n  \r\n\r\n  componentDidMount(){\r\n    if (this.props.history.location.state){\r\n      const currentUser = this.props.currentUser; \r\n      let userData = this.props.history.location.state.userData;\r\n      this.setState((prevState) => ({\r\n        ...prevState,\r\n        user:{\r\n          ...prevState.user,\r\n          _id: userData._id,\r\n          username: userData.username,\r\n          bio: userData.bio || userData.username === currentUser.username ? 'Add bio here' : \"\",\r\n          location: userData.location || userData.username === currentUser.username ? 'Add location' : \"\",\r\n          telephone: userData.telephone || userData.username === currentUser.username ? 'Add phone' : \"\",\r\n          userImage: userData.userImage,\r\n          occupation:userData.location || userData.username === currentUser.username ? 'Add Occupation' : \"\",\r\n          joined: userData.createdAt.split('T')[0]\r\n          }\r\n        })\r\n      )\r\n    }\r\n    else{\r\n      this.props.history.push('/')\r\n    }\r\n  }\r\n\r\n  onSubmitHandler = () =>{\r\n    let userData = {}\r\n    for (let x in this.state.user){      \r\n      if(x !== 'joined' && x !== '_id'){\r\n        userData[x]  = this.state[x]\r\n    }\r\n  }\r\n\r\n  this.props.editUser(userData)\r\n    .then((response)=>this.setState({\r\n      success: response.success})\r\n    )    \r\n  }\r\n  onChangeBioHandler = (e) =>{\r\n    this.setState((prevState) => ({\r\n      ...prevState,\r\n      user:{\r\n        ...prevState.user, \r\n        bio:e.target.value\r\n        }\r\n      })\r\n    )\r\n  }\r\n\r\n\r\n  onChangeTelephoneHandler = (e) =>{\r\n  this.setState((prevState) => ({\r\n    ...prevState,\r\n    user:{\r\n      ...prevState.user, \r\n      telephone:e.target.value\r\n      }\r\n    })\r\n    )\r\n  }\r\n\r\n  onChangeLocationHandler = (e) =>{\r\n    this.setState((prevState) => ({\r\n      ...prevState,\r\n      user:{\r\n        ...prevState.user, \r\n        location:e.target.value\r\n        }\r\n      })\r\n    )\r\n  }\r\n\r\n  onChangeOccupationHandler = (e) =>{\r\n     this.setState((prevState) => ({\r\n      ...prevState,\r\n      user:{\r\n        ...prevState.user, \r\n        occupation:e.target.value\r\n        }\r\n      })\r\n    )\r\n  }\r\n\r\n  render(){\r\n    const{\r\n      _id,\r\n      userImage,\r\n      username,\r\n      location,\r\n      joined,\r\n      bio,\r\n      telephone,\r\n      occupation} = this.state.user;\r\n      const {currentUser} = this.props;\r\n\r\n  return this.props.history.location.state.userData ? (\r\n    <div className=\"user-profile\">\r\n      <div className=\"user-profile__row\">\r\n        <div className=\"user-profile__third\">\r\n          <div className=\"user-profile__card\">\r\n            <div className=\"user-profile__display\">\r\n              <LazyLoadImage\r\n                alt={userImage}\r\n                effect=\"blur\"\r\n                wrapperClassName=\"user-profile__display__image\"\r\n                src={userImage}\r\n                className=\"user-profile__display__image\"\r\n              />\r\n              <div className=\"user-profile__display__user\">\r\n                <input type=\"hidden\" name=\"id\" value={_id} />\r\n                <h2>{username}</h2>\r\n              </div>\r\n            </div>\r\n            <div className=\"user-profile__information\">\r\n              <div>Joined: {joined} </div>\r\n              <div>\r\n                <FontAwesomeIcon icon={faHome} />\r\n                <ContentEditable\r\n                  html={location}\r\n                  disabled={!(currentUser.username === username)}\r\n                  onChange={this.onChangeLocationHandler}\r\n                />\r\n              </div>\r\n              <div>\r\n                <FontAwesomeIcon icon={faPhone} />\r\n                <ContentEditable\r\n                  html={telephone}\r\n                  disabled={!(currentUser.username === username)}\r\n                  onChange={this.onChangeTelephoneHandler}\r\n                />\r\n              </div>\r\n              <div>\r\n                <FontAwesomeIcon icon={faIndustry} />\r\n                <ContentEditable\r\n                  html={occupation}\r\n                  disabled={!(currentUser.username === username)}\r\n                  onChange={this.onChangeOccupationHandler}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"user-profile__two-third\">\r\n          {this.state.success && (\r\n            <div className=\"alert\">\r\n              <div className=\"alert__message\"> {this.state.success}</div>\r\n              <FontAwesomeIcon\r\n                className=\"alert__close-button\"\r\n                onClick={this.closeHandler}\r\n                icon={faTimes}\r\n              />\r\n            </div>\r\n          )}\r\n          <div className=\"user-profile__bio\">\r\n            <h2 className=\"\">\r\n              {\" \"}\r\n              <FontAwesomeIcon icon={faInfo} /> Bio\r\n            </h2>\r\n            <ContentEditable\r\n              className=\"user-profile__bio__content\"\r\n              html={bio}\r\n              disabled={!(currentUser.username === username)}\r\n              onChange={this.onChangeBioHandler}\r\n            />\r\n            {currentUser._id === _id && (\r\n              <div className=\"form-button\" onClick={this.onSubmitHandler}>\r\n                Submit\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  ) : (\r\n    <Redirect to=\"/\" />\r\n  );\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) =>({\r\n    editUser: userData => dispatch(editUser(userData))\r\n})\r\n \r\n\r\n\r\n\r\nexport default connect(null , mapDispatchToProps)(ProfilePage);"]},"metadata":{},"sourceType":"module"}